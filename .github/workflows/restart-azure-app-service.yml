name: Deploy to Production Azure App Service
#to deploy to Azure App Service, we just need to restart & the latest image will be pulled

on:
  repository_dispatch:
    types: [restart-app-service]

jobs:
  restart_app_service:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v2
        
      - name: Install Azure CLI
        uses: azure/setup-azure-cli@v1
        with:
          azcliversion: 2.26.2
        
      - name: Login to Azure
        run: az login --service-principal -u ${{ secrets.AZURE_CLIENT_ID }} -p ${{ secrets.AZURE_CLIENT_SECRET }} --tenant ${{ secrets.AZURE_TENANT_ID }}
        
      - name: Restart Azure App Service
        run: az webapp restart --resource-group YourResourceGroup --name YourAppServiceName
